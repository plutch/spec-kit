{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://spec-kit.dev/schemas/epic-status.json",
  "title": "Epic Status Schema",
  "description": "Tracks multi-feature epic status, dependencies, and progress through the epic workflow",
  "type": "object",
  "required": ["epic_id", "epic_name", "version", "created_date", "phase", "features"],
  "properties": {
    "epic_id": {
      "type": "string",
      "description": "Unique epic identifier (e.g., EPIC-001)",
      "pattern": "^EPIC-[0-9]{3}$",
      "examples": ["EPIC-001", "EPIC-042"]
    },
    "epic_name": {
      "type": "string",
      "description": "Human-readable epic name",
      "minLength": 3,
      "maxLength": 100,
      "examples": ["Multi-Tenant SaaS Platform", "Payment Processing System"]
    },
    "version": {
      "type": "string",
      "description": "Epic specification version (semantic versioning)",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
      "examples": ["1.0.0", "2.1.3"]
    },
    "created_date": {
      "type": "string",
      "format": "date",
      "description": "Date epic was created (YYYY-MM-DD)",
      "examples": ["2025-01-15"]
    },
    "target_date": {
      "type": "string",
      "description": "Target completion date or quarter (YYYY-MM-DD or Q# YYYY)",
      "examples": ["2025-06-30", "Q2 2025"]
    },
    "risk_level": {
      "type": "string",
      "enum": ["HIGH", "MEDIUM", "LOW"],
      "description": "Overall epic risk level (ðŸ”´ HIGH: 8-12, ðŸŸ  MEDIUM: 4-7, ðŸŸ¢ LOW: 0-3)"
    },
    "risk_score": {
      "type": "integer",
      "minimum": 0,
      "maximum": 12,
      "description": "Numeric risk score (0-12 scale, sum of 6 criteria Ã— 0-2 points each)"
    },
    "phase": {
      "type": "string",
      "enum": [
        "planning",
        "architecture",
        "decomposition",
        "implementation",
        "integration",
        "complete"
      ],
      "description": "Current epic workflow phase"
    },
    "status": {
      "type": "string",
      "enum": ["PLANNING", "ACTIVE", "BLOCKED", "COMPLETE"],
      "description": "High-level epic status (ðŸŸ¡ PLANNING, ðŸŸ¢ ACTIVE, ðŸ”´ BLOCKED, âœ… COMPLETE)"
    },
    "features": {
      "type": "array",
      "description": "List of features in this epic",
      "minItems": 2,
      "items": {
        "type": "object",
        "required": ["feature_id", "feature_name", "risk_level", "complexity", "effort_weeks", "dependencies", "status", "phase"],
        "properties": {
          "feature_id": {
            "type": "string",
            "description": "Feature identifier (e.g., 001, 042)",
            "pattern": "^[0-9]{3}$",
            "examples": ["001", "042"]
          },
          "feature_name": {
            "type": "string",
            "description": "Human-readable feature name",
            "minLength": 3,
            "maxLength": 100,
            "examples": ["Tenant Isolation", "Payment Gateway Integration"]
          },
          "risk_level": {
            "type": "string",
            "enum": ["HIGH", "MEDIUM", "LOW"],
            "description": "Feature-level risk (ðŸ”´/ðŸŸ /ðŸŸ¢)"
          },
          "complexity": {
            "type": "string",
            "enum": ["XL", "L", "M", "S"],
            "description": "Feature complexity (XL: >3 weeks, L: 2-3 weeks, M: 1-2 weeks, S: <1 week)"
          },
          "effort_weeks": {
            "type": "number",
            "description": "Estimated effort in weeks",
            "minimum": 0.5,
            "examples": [1, 2.5, 3]
          },
          "dependencies": {
            "type": "array",
            "description": "Feature IDs this feature depends on",
            "items": {
              "type": "string",
              "pattern": "^[0-9]{3}$"
            },
            "examples": [["001", "002"], []]
          },
          "blocks": {
            "type": "array",
            "description": "Feature IDs that depend on this feature",
            "items": {
              "type": "string",
              "pattern": "^[0-9]{3}$"
            },
            "examples": [["003", "004"], []]
          },
          "status": {
            "type": "string",
            "enum": ["NOT_STARTED", "IN_PROGRESS", "BLOCKED", "COMPLETE"],
            "description": "Feature implementation status"
          },
          "phase": {
            "type": "string",
            "enum": [
              "specification",
              "gap_analysis",
              "planning",
              "tasks",
              "implementation",
              "reconciliation",
              "complete"
            ],
            "description": "Current feature workflow phase"
          },
          "spec_file": {
            "type": "string",
            "description": "Path to feature specification file",
            "examples": [".specify/features/001-tenant-isolation/spec.md"]
          },
          "plan_file": {
            "type": "string",
            "description": "Path to feature implementation plan",
            "examples": [".specify/features/001-tenant-isolation/plan.md"]
          },
          "start_date": {
            "type": "string",
            "format": "date",
            "description": "Feature start date (YYYY-MM-DD)"
          },
          "completion_date": {
            "type": "string",
            "format": "date",
            "description": "Feature completion date (YYYY-MM-DD)"
          },
          "overall_quality": {
            "type": "string",
            "enum": ["EXCELLENT", "GOOD", "ACCEPTABLE", "POOR"],
            "description": "Feature quality score (from /speckit.analyze)"
          }
        }
      }
    },
    "approvals": {
      "type": "object",
      "description": "Epic-level approval gates",
      "properties": {
        "planning": {
          "$ref": "#/definitions/approval",
          "description": "Epic vision, feature breakdown, timeline approved"
        },
        "architecture": {
          "$ref": "#/definitions/approval",
          "description": "Architectural decisions, shared patterns approved"
        },
        "security": {
          "$ref": "#/definitions/approval",
          "description": "Security review, compliance validation approved"
        },
        "constitutional": {
          "$ref": "#/definitions/approval",
          "description": "Epic complies with project constitution (v2.4+)"
        }
      }
    },
    "timeline": {
      "type": "object",
      "description": "Epic timeline tracking",
      "properties": {
        "total_effort_weeks_sequential": {
          "type": "number",
          "description": "Total effort if features executed sequentially",
          "minimum": 0,
          "examples": [10, 24.5]
        },
        "total_effort_weeks_parallelized": {
          "type": "number",
          "description": "Total effort with parallelization applied",
          "minimum": 0,
          "examples": [6, 12.5]
        },
        "critical_path": {
          "type": "array",
          "description": "Feature IDs on the critical path",
          "items": {
            "type": "string",
            "pattern": "^[0-9]{3}$"
          },
          "examples": [["001", "003", "005"]]
        },
        "waves": {
          "type": "array",
          "description": "Parallelization waves",
          "items": {
            "type": "object",
            "required": ["wave_number", "features", "duration_weeks", "dependencies"],
            "properties": {
              "wave_number": {
                "type": "integer",
                "minimum": 1,
                "description": "Wave sequence number"
              },
              "features": {
                "type": "array",
                "description": "Feature IDs in this wave",
                "items": {
                  "type": "string",
                  "pattern": "^[0-9]{3}$"
                },
                "minItems": 1
              },
              "duration_weeks": {
                "type": "number",
                "description": "Wave duration (longest feature in wave)",
                "minimum": 0
              },
              "dependencies": {
                "type": "array",
                "description": "Feature IDs that must complete before this wave starts",
                "items": {
                  "type": "string",
                  "pattern": "^[0-9]{3}$"
                }
              },
              "status": {
                "type": "string",
                "enum": ["NOT_STARTED", "IN_PROGRESS", "COMPLETE"],
                "description": "Wave completion status"
              }
            }
          }
        },
        "milestones": {
          "type": "array",
          "description": "Epic milestones",
          "items": {
            "type": "object",
            "required": ["name", "features", "target_date"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Milestone name",
                "examples": ["Foundation Complete", "Core Features Complete", "Epic Complete"]
              },
              "features": {
                "type": "array",
                "description": "Feature IDs that must complete for this milestone",
                "items": {
                  "type": "string",
                  "pattern": "^[0-9]{3}$"
                }
              },
              "target_date": {
                "type": "string",
                "format": "date",
                "description": "Milestone target date (YYYY-MM-DD)"
              },
              "actual_date": {
                "type": "string",
                "format": "date",
                "description": "Milestone actual completion date (YYYY-MM-DD)"
              },
              "status": {
                "type": "string",
                "enum": ["NOT_STARTED", "IN_PROGRESS", "COMPLETE", "AT_RISK"],
                "description": "Milestone status"
              }
            }
          }
        }
      }
    },
    "dependencies": {
      "type": "object",
      "description": "Epic-level dependency tracking",
      "properties": {
        "integration_points": {
          "type": "array",
          "description": "Integration contracts between features",
          "items": {
            "type": "object",
            "required": ["from_feature", "to_feature", "contract", "delivery_date", "status"],
            "properties": {
              "from_feature": {
                "type": "string",
                "pattern": "^[0-9]{3}$",
                "description": "Feature ID providing the integration"
              },
              "to_feature": {
                "type": "string",
                "pattern": "^[0-9]{3}$",
                "description": "Feature ID consuming the integration"
              },
              "contract": {
                "type": "string",
                "description": "What must be delivered (interface, API, schema)",
                "examples": ["ITenantService interface", "Tenant CRUD API"]
              },
              "delivery_date": {
                "type": "string",
                "format": "date",
                "description": "Expected delivery date (YYYY-MM-DD)"
              },
              "actual_delivery_date": {
                "type": "string",
                "format": "date",
                "description": "Actual delivery date (YYYY-MM-DD)"
              },
              "status": {
                "type": "string",
                "enum": ["ON_TRACK", "AT_RISK", "BLOCKED"],
                "description": "Integration point status (ðŸŸ¢/ðŸŸ¡/ðŸ”´)"
              }
            }
          }
        }
      }
    },
    "quality": {
      "type": "object",
      "description": "Epic-wide quality metrics",
      "properties": {
        "overall_quality": {
          "type": "string",
          "enum": ["EXCELLENT", "GOOD", "ACCEPTABLE", "POOR"],
          "description": "Average quality across all features"
        },
        "critical_issues_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Total critical issues across all features"
        },
        "test_coverage_average": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Average test coverage percentage across features",
          "examples": [85.5, 92.3]
        },
        "security_review_status": {
          "type": "string",
          "enum": ["NOT_STARTED", "IN_PROGRESS", "PASSED", "FAILED"],
          "description": "Epic-level security review status"
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional epic metadata",
      "properties": {
        "stakeholders": {
          "type": "array",
          "description": "Epic stakeholders (names/roles)",
          "items": {
            "type": "string"
          },
          "examples": [["Alice (Product Owner)", "Bob (Tech Lead)"]]
        },
        "business_goals": {
          "type": "array",
          "description": "High-level business goals",
          "items": {
            "type": "string"
          },
          "examples": [["Support 10x customer growth", "Reduce per-customer cost by 70%"]]
        },
        "epic_spec_file": {
          "type": "string",
          "description": "Path to epic specification file",
          "examples": [".specify/epics/multi-tenant-saas/epic-spec.md"]
        },
        "epic_architecture_file": {
          "type": "string",
          "description": "Path to epic architecture file",
          "examples": [".specify/epics/multi-tenant-saas/epic-architecture.md"]
        },
        "dependency_map_file": {
          "type": "string",
          "description": "Path to dependency map file",
          "examples": [".specify/epics/multi-tenant-saas/dependency-map.md"]
        },
        "last_updated": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp (ISO 8601)"
        },
        "updated_by": {
          "type": "string",
          "description": "Who last updated this epic status"
        }
      }
    }
  },
  "definitions": {
    "approval": {
      "type": "object",
      "properties": {
        "generated": {
          "type": "boolean",
          "description": "Whether this gate content has been generated"
        },
        "approved": {
          "type": "boolean",
          "description": "Whether this gate has been approved"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Approval timestamp (ISO 8601)"
        },
        "approved_by": {
          "type": "string",
          "description": "Who approved this gate (name/role)"
        }
      }
    }
  },
  "examples": [
    {
      "epic_id": "EPIC-001",
      "epic_name": "Multi-Tenant SaaS Platform",
      "version": "1.0.0",
      "created_date": "2025-01-15",
      "target_date": "Q2 2025",
      "risk_level": "HIGH",
      "risk_score": 10,
      "phase": "implementation",
      "status": "ACTIVE",
      "features": [
        {
          "feature_id": "001",
          "feature_name": "Tenant Isolation",
          "risk_level": "HIGH",
          "complexity": "XL",
          "effort_weeks": 3,
          "dependencies": [],
          "blocks": ["002", "003", "004"],
          "status": "COMPLETE",
          "phase": "complete",
          "spec_file": ".specify/features/001-tenant-isolation/spec.md",
          "plan_file": ".specify/features/001-tenant-isolation/plan.md",
          "start_date": "2025-01-20",
          "completion_date": "2025-02-10",
          "overall_quality": "EXCELLENT"
        },
        {
          "feature_id": "002",
          "feature_name": "Tenant Dashboard",
          "risk_level": "MEDIUM",
          "complexity": "L",
          "effort_weeks": 2,
          "dependencies": ["001"],
          "blocks": ["005"],
          "status": "IN_PROGRESS",
          "phase": "implementation",
          "spec_file": ".specify/features/002-tenant-dashboard/spec.md",
          "plan_file": ".specify/features/002-tenant-dashboard/plan.md",
          "start_date": "2025-02-11",
          "overall_quality": "GOOD"
        },
        {
          "feature_id": "005",
          "feature_name": "Tenant Onboarding",
          "risk_level": "LOW",
          "complexity": "M",
          "effort_weeks": 1,
          "dependencies": ["002", "003", "004"],
          "blocks": [],
          "status": "NOT_STARTED",
          "phase": "specification",
          "spec_file": ".specify/features/005-tenant-onboarding/spec.md"
        }
      ],
      "approvals": {
        "planning": {
          "generated": true,
          "approved": true,
          "timestamp": "2025-01-18T10:00:00Z",
          "approved_by": "Alice (Product Owner)"
        },
        "architecture": {
          "generated": true,
          "approved": true,
          "timestamp": "2025-01-19T14:30:00Z",
          "approved_by": "Bob (Tech Lead)"
        },
        "constitutional": {
          "generated": true,
          "approved": true,
          "timestamp": "2025-01-19T15:00:00Z",
          "approved_by": "Bob (Tech Lead)"
        }
      },
      "timeline": {
        "total_effort_weeks_sequential": 10,
        "total_effort_weeks_parallelized": 6,
        "critical_path": ["001", "003", "005"],
        "waves": [
          {
            "wave_number": 1,
            "features": ["001"],
            "duration_weeks": 3,
            "dependencies": [],
            "status": "COMPLETE"
          },
          {
            "wave_number": 2,
            "features": ["002", "003", "004"],
            "duration_weeks": 3,
            "dependencies": ["001"],
            "status": "IN_PROGRESS"
          },
          {
            "wave_number": 3,
            "features": ["005"],
            "duration_weeks": 1,
            "dependencies": ["002", "003", "004"],
            "status": "NOT_STARTED"
          }
        ],
        "milestones": [
          {
            "name": "Foundation Complete",
            "features": ["001"],
            "target_date": "2025-02-07",
            "actual_date": "2025-02-10",
            "status": "COMPLETE"
          },
          {
            "name": "Core Features Complete",
            "features": ["002", "003", "004"],
            "target_date": "2025-03-14",
            "status": "IN_PROGRESS"
          },
          {
            "name": "Epic Complete",
            "features": ["005"],
            "target_date": "2025-03-21",
            "status": "NOT_STARTED"
          }
        ]
      },
      "dependencies": {
        "integration_points": [
          {
            "from_feature": "001",
            "to_feature": "002",
            "contract": "ITenantService interface, getTenantContext(req) helper",
            "delivery_date": "2025-02-10",
            "actual_delivery_date": "2025-02-10",
            "status": "ON_TRACK"
          },
          {
            "from_feature": "002",
            "to_feature": "005",
            "contract": "Tenant dashboard UI component",
            "delivery_date": "2025-03-07",
            "status": "AT_RISK"
          }
        ]
      },
      "quality": {
        "overall_quality": "GOOD",
        "critical_issues_count": 2,
        "test_coverage_average": 87.5,
        "security_review_status": "IN_PROGRESS"
      },
      "metadata": {
        "stakeholders": ["Alice (Product Owner)", "Bob (Tech Lead)", "Carol (Security)"],
        "business_goals": ["Support 10x customer growth", "Reduce per-customer cost by 70%"],
        "epic_spec_file": ".specify/epics/multi-tenant-saas/epic-spec.md",
        "epic_architecture_file": ".specify/epics/multi-tenant-saas/epic-architecture.md",
        "dependency_map_file": ".specify/epics/multi-tenant-saas/dependency-map.md",
        "last_updated": "2025-02-15T09:30:00Z",
        "updated_by": "Bob (Tech Lead)"
      }
    }
  ]
}
